{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/external \"gwasCredibleSets\"","webpack://[name]/./esm/ext/lz-credible-sets.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","gwasCredibleSets","install","LocusZoom","base","CredibleSetLZ","config","arguments","dependentSource","this","params","fields","log_pvalue","Error","constructor","SOURCE_NAME","assign","threshold","significance_threshold","state","chain","credible_set_threshold","chr","start","end","join","body","length","Promise","resolve","self","nlogpvals","map","item","some","val","credset_data","scores","scoring","bayesFactors","posteriorProbabilities","normalizeProbabilities","credibleSet","marking","findCredibleSet","credSetScaled","rescaleCredibleSet","credSetBool","markBoolean","push","posterior_prob","contrib_fraction","is_member","e","console","error","data","outnames","trans","src","dest","keys","forEach","attr","Adapters","add","Layouts","unnamespaced","html","namespace","closable","show","or","hide","and","id","fill_opacity","tooltip","match","send","receive","color","unshift","field","scale_function","parameters","field_value","then","type","id_field","x_axis","filters","operator","behaviors","onmouseover","action","status","onmouseout","onclick","exclusive","onshiftclick","tooltip_positioning","title","text","x","style","width","height","min_height","proportional_width","margin","top","right","bottom","left","inner_border","toolbar","interaction","drag_background_to_pan","scroll_to_zoom","x_linked","data_layers","widgets","position","button_html","button_title","layer_name","default_config_display_name","options","display_name","display","point_shape","point_size","else","legend","shape","size","label","class","breaks","values","responsive_resize","min_region_scale","max_region_scale","panels","use"],"mappings":";+BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,kBClFrDhC,EAAOD,QAAUkC,kB,+nDCajB,SAASC,EAASC,GACd,IA4GUjC,EAgBAkC,EA5GJC,EAjBmB,a,kOAAA,U,MAAA,OAkBrB,WAAYC,GAAQ,wBAChB,eAASC,YACJC,iBAAkB,EAFP,EAlBC,O,EAAA,G,EAAA,iCAuBXF,GAEN,GADA,8CAAmBC,YACbE,KAAKC,OAAOC,SAAUF,KAAKC,OAAOC,OAAOC,WAC3C,MAAM,IAAIC,MAAJ,4BAA+BJ,KAAKK,YAAYC,YAAhD,kDAIVN,KAAKC,OAAS/B,OAAOqC,OACjB,CAAEC,UAAW,IAAMC,uBAAwB,OAC3CT,KAAKC,UAhCQ,kCAoCRS,EAAOC,EAAOT,GAEvB,MAAO,CADWQ,EAAME,wBAA0BZ,KAAKC,OAAOO,UAC3CE,EAAMG,IAAKH,EAAMI,MAAOJ,EAAMK,KAAKC,KAAK,OAtC1C,mCAyCRN,EAAOC,GAChB,IAAKA,EAAMM,KAAKC,OAEZ,OAAOC,QAAQC,QAAQ,IAG3B,IAAMC,EAAOrB,KAEPQ,EAAYE,EAAME,wBAA0BZ,KAAKC,OAAOO,UAE9D,QAA4D,IAAjDG,EAAMM,KAAK,GAAGI,EAAKpB,OAAOC,OAAOC,YACxC,MAAM,IAAIC,MAAM,qFAEpB,IAAMkB,EAAYX,EAAMM,KAAKM,KAAI,SAACC,GAAD,OAAUA,EAAKH,EAAKpB,OAAOC,OAAOC,eAEnE,IAAKmB,EAAUG,MAAK,SAACC,GAAD,OAASA,GAAOL,EAAKpB,OAAOQ,0BAG5C,OAAOU,QAAQC,QAAQ,IAG3B,IAAMO,EAAe,GACrB,IAWI,IAVA,IAAMC,EAASC,UAAQC,aAAaR,GAC9BS,EAAyBF,UAAQG,uBAAuBJ,GAIxDK,EAAcC,UAAQC,gBAAgBJ,EAAwBvB,GAC9D4B,EAAgBF,UAAQG,mBAAmBJ,GAC3CK,EAAcJ,UAAQK,YAAYN,GAG/BzE,EAAI,EAAGA,EAAImD,EAAMM,KAAKC,OAAQ1D,IACnCmE,EAAaa,KAAK,CACdC,eAAgBV,EAAuBvE,GACvCkF,iBAAkBN,EAAc5E,GAChCmF,UAAWL,EAAY9E,KAGjC,MAAOoF,GAELC,QAAQC,MAAMF,GAElB,OAAOzB,QAAQC,QAAQO,KArFN,uCAwFJoB,EAAMpC,EAAOT,EAAQ8C,EAAUC,GAE5C,GAAItC,EAAMM,KAAKC,QAAU6B,EAAK7B,OAC1B,IADkC,eACzB1D,GACL,IAAM0F,EAAMH,EAAKvF,GACX2F,EAAOxC,EAAMM,KAAKzD,GACxBU,OAAOkF,KAAKF,GAAKG,SAAQ,SAAUC,GAC/BH,EAAKG,GAAQJ,EAAII,OAJhB9F,EAAI,EAAGA,EAAIuF,EAAK7B,OAAQ1D,IAAK,EAA7BA,GAQb,OAAOmD,EAAMM,U,2BAnGI,GACLvB,EAAU6D,SAASlF,IAAI,gBAuG3CqB,EAAU6D,SAASC,IAAI,gBAAiB5D,GAGxCF,EAAU+D,QAAQD,IAAI,UAAW,6BAEvB/F,EAAIiC,EAAU+D,QAAQpF,IAAI,UAAW,uBAAwB,CAAEqF,cAAc,KACjFC,MAAQ,iKACHlG,IAGXiC,EAAU+D,QAAQD,IAAI,UAAW,0BAA2B,CACxDI,UAAW,CAAE,MAAS,QAAS,QAAW,WAC1CC,UAAU,EACVC,KAAM,CAAEC,GAAI,CAAC,cAAe,aAC5BC,KAAM,CAAEC,IAAK,CAAC,gBAAiB,eAC/BN,KAAM,2QAKVjE,EAAU+D,QAAQD,IAAI,aAAc,6BAC1B7D,EAAOD,EAAU+D,QAAQpF,IAAI,aAAc,sBAAuB,CACpEqF,cAAc,EACdQ,GAAI,yBACJN,UAAW,CAAE,MAAS,QAAS,QAAW,UAAW,GAAM,MAC3DO,aAAc,GACdC,QAAS1E,EAAU+D,QAAQpF,IAAI,UAAW,2BAA4B,CAAEqF,cAAc,IACtFxD,OAAQ,CACJ,8BAA+B,+BAC/B,iCAAkC,kDAClC,iCACA,uCAAwC,yCACxC,kCACA,yBAA0B,6BAE9BmE,MAAO,CAAEC,KAAM,8BAA+BC,QAAS,kCAEtDC,MAAMC,QAAQ,CACfC,MAAO,qBACPC,eAAgB,KAChBC,WAAY,CACRC,aAAa,EACbC,KAAM,aAGPnF,IAGXD,EAAU+D,QAAQD,IAAI,aAAc,0BAA2B,CAC3DI,UAAW,CAAE,MAAS,QAAS,QAAW,WAC1CM,GAAI,wBACJa,KAAM,mBACNC,SAAU,8BACVC,OAAQ,CACJP,MAAO,gCAEXF,MAAO,CACH,CACIE,MAAO,qBACPC,eAAgB,KAChBC,WAAY,CACRC,aAAa,EACbC,KAAM,YAGd,WAEJ5E,OAAQ,CAAC,8BAA+B,+BAAgC,iCAAkC,uCAAwC,yCAA0C,mCAC5LmE,MAAO,CAAEC,KAAM,8BAA+BC,QAAS,+BACvDW,QAAS,CAEL,CAAER,MAAO,kCAAmCS,SAAU,IAAK1G,OAAO,IAEtE2G,UAAW,CACPC,YAAa,CACT,CAAEC,OAAQ,MAAOC,OAAQ,gBAE7BC,WAAY,CACR,CAAEF,OAAQ,QAASC,OAAQ,gBAE/BE,QAAS,CACL,CAAEH,OAAQ,SAAUC,OAAQ,WAAYG,WAAW,IAEvDC,aAAc,CACV,CAAEL,OAAQ,SAAUC,OAAQ,cAGpCnB,QAAS1E,EAAU+D,QAAQpF,IAAI,UAAW,0BAA2B,CAAEqF,cAAc,IACrFkC,oBAAqB,QAGzBlG,EAAU+D,QAAQD,IAAI,QAAS,0BAA2B,CACtDU,GAAI,wBACJ2B,MAAO,CAAEC,KAAM,2BAA4BC,EAAG,GAAIC,MAAO,CAAE,YAAa,SACxEC,MAAO,IACPC,OAAQ,GACRC,WAAY,GACZC,mBAAoB,EACpBC,OAAQ,CAAEC,IAAK,GAAIC,MAAO,GAAIC,OAAQ,EAAGC,KAAM,IAC/CC,aAAc,qBACdC,QAASjH,EAAU+D,QAAQpF,IAAI,UAAW,iBAAkB,CAAEqF,cAAc,IAC5EkD,YAAa,CACTC,wBAAwB,EACxBC,gBAAgB,EAChBC,UAAU,GAEdC,YAAa,CACTtH,EAAU+D,QAAQpF,IAAI,aAAc,0BAA2B,CAAEqF,cAAc,OAIvFhE,EAAU+D,QAAQD,IAAI,QAAS,2BAA4B,WACvD,IAAM/F,EAAIiC,EAAU+D,QAAQpF,IAAI,QAAS,cAAe,CACpDqF,cAAc,EACdQ,GAAI,0BACJN,UAAW,CAAE,MAAS,QAAS,QAAW,WAC1CoD,YAAa,CACTtH,EAAU+D,QAAQpF,IAAI,aAAc,eAAgB,CAAEqF,cAAc,IACpEhE,EAAU+D,QAAQpF,IAAI,aAAc,cAAe,CAAEqF,cAAc,IACnEhE,EAAU+D,QAAQpF,IAAI,aAAc,2BAA4B,CAAEqF,cAAc,OAqGxF,OAjGAjG,EAAEkJ,QAAQM,QAAQzE,KACd,CACIuC,KAAM,kBACNmC,SAAU,QACV1C,MAAO,OAEP2C,YAAa,qBACbC,aAAc,uCACdC,WAAY,yBACZC,4BAA6B,mCAE7BC,QAAS,CACL,CAEIC,aAAc,6BACdC,QAAS,CACLC,YAAa,SACbC,WAAY,GACZnD,MAAO,CACHE,MAAO,kCACPC,eAAgB,KAChBC,WAAY,CACRC,aAAa,EACbC,KAAM,UACN8C,KAAM,YAGdC,OAAQ,CACJ,CACIC,MAAO,SACPtD,MAAO,UACPuD,KAAM,GACNC,MAAO,kBACPC,MAAO,yBAEX,CACIH,MAAO,SACPtD,MAAO,UACPuD,KAAM,GACNC,MAAO,sBACPC,MAAO,4BAKvB,CAEIT,aAAc,8CACdC,QAAS,CACLC,YAAa,SACbC,WAAY,GACZnD,MAAO,CACH,CACIE,MAAO,yCACPC,eAAgB,KAChBC,WAAY,CACRC,YAAa,EACbC,KAAM,YAGd,CACIH,eAAgB,cAChBD,MAAO,yCACPE,WAAY,CACRsD,OAAQ,CAAC,EAAG,GACZC,OAAQ,CAAC,UAAW,cAIhCN,OAAQ,CACJ,CACIC,MAAO,SACPtD,MAAO,UACPuD,KAAM,GACNC,MAAO,kBACPC,MAAO,yBAEX,CACIH,MAAO,SACPtD,MAAO,UACPuD,KAAM,GACNC,MAAO,oBACPC,MAAO,yBAEX,CACIH,MAAO,SACPtD,MAAO,UACPuD,KAAM,GACNC,MAAO,oBACPC,MAAO,+BAQ5BxK,EA7GgD,IAgH3DiC,EAAU+D,QAAQD,IAAI,OAAQ,2BAA4B,CACtD9C,MAAO,GACPuF,MAAO,IACPC,OAAQ,IACRkC,mBAAmB,EACnBC,iBAAkB,IAClBC,iBAAkB,IAClB3B,QAASjH,EAAU+D,QAAQpF,IAAI,UAAW,uBAAwB,CAAEqF,cAAc,IAClF6E,OAAQ,CACJ7I,EAAU+D,QAAQpF,IAAI,QAAS,2BAA4B,CAAEqF,cAAc,IAC3EhE,EAAU+D,QAAQpF,IAAI,QAAS,0BAA2B,CAAEqF,cAAc,IAC1EhE,EAAU+D,QAAQpF,IAAI,QAAS,QAAS,CAAEqF,cAAc,OAO3C,oBAAdhE,WAGPA,UAAU8I,IAAI/I,GAIHA,e","file":"ext/lz-credible-sets.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = gwasCredibleSets;","/**\n    Custom code used to power credible sets demonstration example. This is not part of the core LocusZoom library,\n    but can be included as a standalone file.\n\n    The page must incorporate and load all libraries before this file can be used, including:\n     - Vendor assets\n     - LocusZoom\n     - gwas-credible-sets (available via NPM or a related CDN)\n @module\n*/\n\nimport {marking, scoring} from 'gwas-credible-sets';\n\nfunction install (LocusZoom) {\n    const BaseAdapter = LocusZoom.Adapters.get('BaseAdapter');\n    /**\n     * Custom data source that calculates the 95% credible set based on provided data.\n     * This source must be requested as the second step in a chain, after a previous step that returns fields required\n     *  for the calculation.\n     *\n     * @param {Object} init.params\n     * @param {Object} init.params.fields\n     * @param {String} init.params.fields.log_pvalue The name of the field containing -log10 pvalue information\n     * @param {Number} [init.params.threshold=0.95] The credible set threshold (eg 95%). Will continue selecting SNPs\n     *  until the posterior probabilities add up to at least this fraction of the total.\n     * @param {Number} [init.params.significance_threshold=7.301] Do not perform a credible set calculation for this\n     *  region unless AT LEAST ONE SNP (as -log10p) exceeds the line of GWAS signficance. Otherwise we are declaring a\n     *  credible set when there is no evidence of anything being significant at all. If one snp is significant, it will\n     *  create a credible set for the entire region; the resulting set may include things below the line of significance.\n     */\n    class CredibleSetLZ extends BaseAdapter {\n        constructor(config) {\n            super(...arguments);\n            this.dependentSource = true; // Don't do calcs for a region with no assoc data\n        }\n\n        parseInit(config) {\n            super.parseInit(...arguments);\n            if (!(this.params.fields && this.params.fields.log_pvalue)) {\n                throw new Error(`Source config for ${this.constructor.SOURCE_NAME} must specify how to find 'fields.log_pvalue'`);\n            }\n\n            // Set defaults. Default sig threshold is the line of GWAS significance. (as -log10p)\n            this.params = Object.assign(\n                { threshold: 0.95, significance_threshold: 7.301 },\n                this.params\n            );\n        }\n\n        getCacheKey (state, chain, fields) {\n            const threshold = state.credible_set_threshold || this.params.threshold;\n            return [threshold, state.chr, state.start, state.end].join('_');\n        }\n\n        fetchRequest(state, chain) {\n            if (!chain.body.length) {\n                // No credible set can be calculated because there is no association data for this region\n                return Promise.resolve([]);\n            }\n\n            const self = this;\n            // The threshold can be overridden dynamically via `plot.state`, or set when the source is created\n            const threshold = state.credible_set_threshold || this.params.threshold;\n            // Calculate raw bayes factors and posterior probabilities based on information returned from the API\n            if (typeof chain.body[0][self.params.fields.log_pvalue] === 'undefined') {\n                throw new Error('Credible set source could not locate the required fields from a previous request.');\n            }\n            const nlogpvals = chain.body.map((item) => item[self.params.fields.log_pvalue]);\n\n            if (!nlogpvals.some((val) => val >= self.params.significance_threshold)) {\n                // If NO points have evidence of significance, define the credible set to be empty\n                //  (rather than make a credible set that we don't think is meaningful)\n                return Promise.resolve([]);\n            }\n\n            const credset_data = [];\n            try {\n                const scores = scoring.bayesFactors(nlogpvals);\n                const posteriorProbabilities = scoring.normalizeProbabilities(scores);\n\n                // Use scores to mark the credible set in various ways (depending on your visualization preferences,\n                //   some of these may not be needed)\n                const credibleSet = marking.findCredibleSet(posteriorProbabilities, threshold);\n                const credSetScaled = marking.rescaleCredibleSet(credibleSet);\n                const credSetBool = marking.markBoolean(credibleSet);\n\n                // Annotate each response record based on credible set membership\n                for (let i = 0; i < chain.body.length; i++) {\n                    credset_data.push({\n                        posterior_prob: posteriorProbabilities[i],\n                        contrib_fraction: credSetScaled[i],\n                        is_member: credSetBool[i],\n                    });\n                }\n            } catch (e) {\n                // If the calculation cannot be completed, return the data without annotation fields\n                console.error(e);\n            }\n            return Promise.resolve(credset_data);\n        }\n\n        combineChainBody(data, chain, fields, outnames, trans) {\n            // At this point namespacing has been applied; add the calculated fields for this source to the chain\n            if (chain.body.length && data.length) {\n                for (let i = 0; i < data.length; i++) {\n                    const src = data[i];\n                    const dest = chain.body[i];\n                    Object.keys(src).forEach(function (attr) {\n                        dest[attr] = src[attr];\n                    });\n                }\n            }\n            return chain.body;\n        }\n    }\n\n\n    LocusZoom.Adapters.add('CredibleSetLZ', CredibleSetLZ);\n\n    // Add related layouts to the central global registry\n    LocusZoom.Layouts.add('tooltip', 'association_credible_set', function () {\n        // Extend a known tooltip with an extra row of info showing posterior probabilities\n        const l = LocusZoom.Layouts.get('tooltip', 'standard_association', { unnamespaced: true });\n        l.html += '{{#if {{namespace[credset]}}posterior_prob}}<br>Posterior probability: <strong>{{{{namespace[credset]}}posterior_prob|scinotation|htmlescape}}</strong>{{/if}}';\n        return l;\n    }());\n\n    LocusZoom.Layouts.add('tooltip', 'annotation_credible_set', {\n        namespace: { 'assoc': 'assoc', 'credset': 'credset' },\n        closable: true,\n        show: { or: ['highlighted', 'selected'] },\n        hide: { and: ['unhighlighted', 'unselected'] },\n        html: '<strong>{{{{namespace[assoc]}}variant|htmlescape}}</strong><br>'\n            + 'P Value: <strong>{{{{namespace[assoc]}}log_pvalue|logtoscinotation|htmlescape}}</strong><br>' +\n            '<br>Posterior probability: <strong>{{{{namespace[credset]}}posterior_prob|scinotation|htmlescape}}</strong>',\n    });\n\n    LocusZoom.Layouts.add('data_layer', 'association_credible_set', function () {\n        const base = LocusZoom.Layouts.get('data_layer', 'association_pvalues', {\n            unnamespaced: true,\n            id: 'associationcredibleset',\n            namespace: { 'assoc': 'assoc', 'credset': 'credset', 'ld': 'ld' },\n            fill_opacity: 0.7,\n            tooltip: LocusZoom.Layouts.get('tooltip', 'association_credible_set', { unnamespaced: true }),\n            fields: [\n                '{{namespace[assoc]}}variant', '{{namespace[assoc]}}position',\n                '{{namespace[assoc]}}log_pvalue', '{{namespace[assoc]}}log_pvalue|logtoscinotation',\n                '{{namespace[assoc]}}ref_allele',\n                '{{namespace[credset]}}posterior_prob', '{{namespace[credset]}}contrib_fraction',\n                '{{namespace[credset]}}is_member',\n                '{{namespace[ld]}}state', '{{namespace[ld]}}isrefvar',\n            ],\n            match: { send: '{{namespace[assoc]}}variant', receive: '{{namespace[assoc]}}variant' },\n        });\n        base.color.unshift({\n            field: 'lz_highlight_match',  // Special field name whose presence triggers custom rendering\n            scale_function: 'if',\n            parameters: {\n                field_value: true,\n                then: '#FFf000',\n            },\n        });\n        return base;\n    }());\n\n    LocusZoom.Layouts.add('data_layer', 'annotation_credible_set', {\n        namespace: { 'assoc': 'assoc', 'credset': 'credset' },\n        id: 'annotationcredibleset',\n        type: 'annotation_track',\n        id_field: '{{namespace[assoc]}}variant',\n        x_axis: {\n            field: '{{namespace[assoc]}}position',\n        },\n        color: [\n            {\n                field: 'lz_highlight_match',  // Special field name whose presence triggers custom rendering\n                scale_function: 'if',\n                parameters: {\n                    field_value: true,\n                    then: '#001cee',\n                },\n            },\n            '#00CC00',\n        ],\n        fields: ['{{namespace[assoc]}}variant', '{{namespace[assoc]}}position', '{{namespace[assoc]}}log_pvalue', '{{namespace[credset]}}posterior_prob', '{{namespace[credset]}}contrib_fraction', '{{namespace[credset]}}is_member'],\n        match: { send: '{{namespace[assoc]}}variant', receive: '{{namespace[assoc]}}variant' },\n        filters: [\n            // Specify which points to show on the track. Any selection must satisfy ALL filters\n            { field: '{{namespace[credset]}}is_member', operator: '=', value: true },\n        ],\n        behaviors: {\n            onmouseover: [\n                { action: 'set', status: 'highlighted' },\n            ],\n            onmouseout: [\n                { action: 'unset', status: 'highlighted' },\n            ],\n            onclick: [\n                { action: 'toggle', status: 'selected', exclusive: true },\n            ],\n            onshiftclick: [\n                { action: 'toggle', status: 'selected' },\n            ],\n        },\n        tooltip: LocusZoom.Layouts.get('tooltip', 'annotation_credible_set', { unnamespaced: true }),\n        tooltip_positioning: 'top',\n    });\n\n    LocusZoom.Layouts.add('panel', 'annotation_credible_set', {\n        id: 'annotationcredibleset',\n        title: { text: 'SNPs in 95% credible set', x: 50, style: { 'font-size': '14px' } },\n        width: 800,\n        height: 45,\n        min_height: 45,\n        proportional_width: 1,\n        margin: { top: 25, right: 50, bottom: 0, left: 50 },\n        inner_border: 'rgb(210, 210, 210)',\n        toolbar: LocusZoom.Layouts.get('toolbar', 'standard_panel', { unnamespaced: true }),\n        interaction: {\n            drag_background_to_pan: true,\n            scroll_to_zoom: true,\n            x_linked: true,\n        },\n        data_layers: [\n            LocusZoom.Layouts.get('data_layer', 'annotation_credible_set', { unnamespaced: true }),\n        ],\n    });\n\n    LocusZoom.Layouts.add('panel', 'association_credible_set', function () {\n        const l = LocusZoom.Layouts.get('panel', 'association', {\n            unnamespaced: true,\n            id: 'associationcrediblesets',\n            namespace: { 'assoc': 'assoc', 'credset': 'credset' },\n            data_layers: [\n                LocusZoom.Layouts.get('data_layer', 'significance', { unnamespaced: true }),\n                LocusZoom.Layouts.get('data_layer', 'recomb_rate', { unnamespaced: true }),\n                LocusZoom.Layouts.get('data_layer', 'association_credible_set', { unnamespaced: true }),\n            ],\n        });\n        // Add \"display options\" button to control how credible set coloring is overlaid on the standard association plot\n        l.toolbar.widgets.push(\n            {\n                type: 'display_options',\n                position: 'right',\n                color: 'blue',\n                // Below: special config specific to this widget\n                button_html: 'Display options...',\n                button_title: 'Control how plot items are displayed',\n                layer_name: 'associationcredibleset',\n                default_config_display_name: 'Linkage Disequilibrium (default)', // display name for the default plot color option (allow user to revert to plot defaults)\n\n                options: [\n                    {\n                        // First dropdown menu item\n                        display_name: '95% credible set (boolean)',  // Human readable representation of field name\n                        display: {  // Specify layout directives that control display of the plot for this option\n                            point_shape: 'circle',\n                            point_size: 40,\n                            color: {\n                                field: '{{namespace[credset]}}is_member',\n                                scale_function: 'if',\n                                parameters: {\n                                    field_value: true,\n                                    then: '#00CC00',\n                                    else: '#CCCCCC',\n                                },\n                            },\n                            legend: [ // Tells the legend how to represent this display option\n                                {\n                                    shape: 'circle',\n                                    color: '#00CC00',\n                                    size: 40,\n                                    label: 'In credible set',\n                                    class: 'lz-data_layer-scatter',\n                                },\n                                {\n                                    shape: 'circle',\n                                    color: '#CCCCCC',\n                                    size: 40,\n                                    label: 'Not in credible set',\n                                    class: 'lz-data_layer-scatter',\n                                },\n                            ],\n                        },\n                    },\n                    {\n                        // Second option. The same plot- or even the same field- can be colored in more than one way.\n                        display_name: '95% credible set (gradient by contribution)',\n                        display: {\n                            point_shape: 'circle',\n                            point_size: 40,\n                            color: [\n                                {\n                                    field: '{{namespace[credset]}}contrib_fraction',\n                                    scale_function: 'if',\n                                    parameters: {\n                                        field_value: 0,\n                                        then: '#777777',\n                                    },\n                                },\n                                {\n                                    scale_function: 'interpolate',\n                                    field: '{{namespace[credset]}}contrib_fraction',\n                                    parameters: {\n                                        breaks: [0, 1],\n                                        values: ['#fafe87', '#9c0000'],\n                                    },\n                                },\n                            ],\n                            legend: [\n                                {\n                                    shape: 'circle',\n                                    color: '#777777',\n                                    size: 40,\n                                    label: 'No contribution',\n                                    class: 'lz-data_layer-scatter',\n                                },\n                                {\n                                    shape: 'circle',\n                                    color: '#fafe87',\n                                    size: 40,\n                                    label: 'Some contribution',\n                                    class: 'lz-data_layer-scatter',\n                                },\n                                {\n                                    shape: 'circle',\n                                    color: '#9c0000',\n                                    size: 40,\n                                    label: 'Most contribution',\n                                    class: 'lz-data_layer-scatter',\n                                },\n                            ],\n                        },\n                    },\n                ],\n            }\n        );\n        return l;\n    }());\n\n    LocusZoom.Layouts.add('plot', 'association_credible_set', {\n        state: {},\n        width: 800,\n        height: 450,\n        responsive_resize: true,\n        min_region_scale: 20000,\n        max_region_scale: 1000000,\n        toolbar: LocusZoom.Layouts.get('toolbar', 'standard_association', { unnamespaced: true }),\n        panels: [\n            LocusZoom.Layouts.get('panel', 'association_credible_set', { unnamespaced: true }),\n            LocusZoom.Layouts.get('panel', 'annotation_credible_set', { unnamespaced: true }),\n            LocusZoom.Layouts.get('panel', 'genes', { unnamespaced: true }),\n        ],\n    });\n\n}\n\n\nif (typeof LocusZoom !== 'undefined') {\n    // Auto-register the plugin when included as a script tag. ES6 module users must register via LocusZoom.use()\n    // eslint-disable-next-line no-undef\n    LocusZoom.use(install);\n}\n\n\nexport default install;\n"],"sourceRoot":""}