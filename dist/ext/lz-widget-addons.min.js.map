{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/external \"d3\"","webpack://[name]/./esm/helpers/layouts.js","webpack://[name]/./esm/ext/lz-widget-addons.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","d3","applyNamespaces","element","namespace","default_namespace","default","match","base","resolved_namespace","re","replace","exec","length","push","namespaced_element","namespaced_property","merge","custom_layout","default_layout","Error","custom_type","default_type","Array","isArray","deepCopy","item","JSON","parse","stringify","nameToSymbol","shape","factory_name","charAt","toUpperCase","slice","STATUS_VERBS","STATUS_ADJECTIVES","STATUS_ANTIVERBS","install","LocusZoom","covariates_model_association","covariates_model_plot_toolbar","_Button","Widgets","_BaseWidget","CovariatesModel","this","parent_plot","state","model","covariates","button","add","element_reference","plot","html","toHTML","toString","applyState","updateWidget","removeByIdx","idx","splice","removeAll","update","menu","setColor","layout","color","setHtml","button_html","setTitle","button_title","setOnclick","populate","setPopulate","selector","inner_selector","append","table","forEach","covariate","row","attr","style","on","preUpdate","count","noun","disable","show","DataLayersWidget","parent_panel","data_layer_ids_by_z_index","reverse","id","data_layer","data_layers","statuses","status_adj","onclick","highlight","status_idx","indexOf","status_verb","global_statuses","at_top","at_bottom","td","moveDown","moveUp","confirm","parent","removeDataLayer","covariates_model_tooltip","Layouts","unnamespaced","covariates_model_plot","widgets","type","position","use"],"mappings":"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","file":"ext/lz-widget-addons.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","module.exports = d3;","/**\n * Utilities for modifying or working with layout objects\n *  @module\n */\nimport * as d3 from 'd3';\n\n\n/**\n * Apply namespaces to layout, recursively\n * @private\n  */\nfunction applyNamespaces(element, namespace, default_namespace) {\n    if (namespace) {\n        if (typeof namespace == 'string') {\n            namespace = { default: namespace };\n        }\n    } else {\n        namespace = { default: '' };\n    }\n    if (typeof element == 'string') {\n        const re = /\\{\\{namespace(\\[[A-Za-z_0-9]+\\]|)\\}\\}/g;\n        let match, base, key, resolved_namespace;\n        const replace = [];\n        while ((match = re.exec(element)) !== null) {\n            base = match[0];\n            key = match[1].length ? match[1].replace(/(\\[|\\])/g, '') : null;\n            resolved_namespace = default_namespace;\n            if (namespace != null && typeof namespace == 'object' && typeof namespace[key] != 'undefined') {\n                resolved_namespace = namespace[key] + (namespace[key].length ? ':' : '');\n            }\n            replace.push({ base: base, namespace: resolved_namespace });\n        }\n        for (let r in replace) {\n            element = element.replace(replace[r].base, replace[r].namespace);\n        }\n    } else if (typeof element == 'object' && element != null) {\n        if (typeof element.namespace != 'undefined') {\n            const merge_namespace = (typeof element.namespace == 'string') ? { default: element.namespace } : element.namespace;\n            namespace = merge(namespace, merge_namespace);\n        }\n        let namespaced_element, namespaced_property;\n        for (let property in element) {\n            if (property === 'namespace') {\n                continue;\n            }\n            namespaced_element = applyNamespaces(element[property], namespace, default_namespace);\n            namespaced_property = applyNamespaces(property, namespace, default_namespace);\n            if (property !== namespaced_property) {\n                delete element[property];\n            }\n            element[namespaced_property] = namespaced_element;\n        }\n    }\n    return element;\n}\n\n/**\n * A helper method used for merging two objects. If a key is present in both, takes the value from the first object\n *   Values from `default_layout` will be cleanly copied over, ensuring no references or shared state.\n *\n * Frequently used for preparing custom layouts. Both objects should be JSON-serializable.\n *\n * @param {object} custom_layout An object containing configuration parameters that override or add to defaults\n * @param {object} default_layout An object containing default settings.\n * @returns {object} The custom layout is modified in place and also returned from this method.\n */\nfunction merge(custom_layout, default_layout) {\n    if (typeof custom_layout !== 'object' || typeof default_layout !== 'object') {\n        throw new Error(`LocusZoom.Layouts.merge only accepts two layout objects; ${typeof custom_layout}, ${typeof default_layout} given`);\n    }\n    for (let property in default_layout) {\n        if (!Object.prototype.hasOwnProperty.call(default_layout, property)) {\n            continue;\n        }\n        // Get types for comparison. Treat nulls in the custom layout as undefined for simplicity.\n        // (javascript treats nulls as \"object\" when we just want to overwrite them as if they're undefined)\n        // Also separate arrays from objects as a discrete type.\n        let custom_type = custom_layout[property] === null ? 'undefined' : typeof custom_layout[property];\n        let default_type = typeof default_layout[property];\n        if (custom_type === 'object' && Array.isArray(custom_layout[property])) {\n            custom_type = 'array';\n        }\n        if (default_type === 'object' && Array.isArray(default_layout[property])) {\n            default_type = 'array';\n        }\n        // Unsupported property types: throw an exception\n        if (custom_type === 'function' || default_type === 'function') {\n            throw new Error('LocusZoom.Layouts.merge encountered an unsupported property type');\n        }\n        // Undefined custom value: pull the default value\n        if (custom_type === 'undefined') {\n            custom_layout[property] = deepCopy(default_layout[property]);\n            continue;\n        }\n        // Both values are objects: merge recursively\n        if (custom_type === 'object' && default_type === 'object') {\n            custom_layout[property] = merge(custom_layout[property], default_layout[property]);\n            continue;\n        }\n    }\n    return custom_layout;\n}\n\nfunction deepCopy(item) {\n    return JSON.parse(JSON.stringify(item));\n}\n\n/**\n * Convert name to symbol\n * Layout objects accept symbol names as strings (circle, triangle, etc). Convert to symbol objects.\n * @return {d3.symbol|null}\n */\nfunction nameToSymbol(shape) {\n    // Legend shape names are strings; need to connect this to factory. Eg circle --> d3.symbolCircle\n    if (!shape) {\n        return null;\n    }\n    const factory_name = `symbol${shape.charAt(0).toUpperCase() + shape.slice(1)}`;\n    return d3[factory_name] || null;\n}\n\nexport { applyNamespaces, deepCopy, merge, nameToSymbol };\n","/**\n * Optional LocusZoom extension: must be included separately, and after LocusZoom has been loaded\n *\n * This contains (reusable) code to power some (rarely used) demo features:\n *  - The \"covariates model\" demo, in which an LZ toolbar widget is populated\n *    with information by selecting points on the plot (see \"covariates model\" demo)\n *  - The \"data layers\" button, which allows fine control over multiple data layers shown in the same panel\n *    (show/hide, fade, change order, etc). This is powerful, but rarely used because showing many datasets in a small\n *    space is hard to read. (see \"multiple phenotypes layered\" demo)\n * @module\n */\nimport {deepCopy} from '../helpers/layouts';\n\n// In order to work in a UMD context, this module imports the top-level LocusZoom symbol\n\nconst STATUS_VERBS = ['highlight', 'select', 'fade', 'hide'];\nconst STATUS_ADJECTIVES = ['highlighted', 'selected', 'faded', 'hidden'];\nconst STATUS_ANTIVERBS = ['unhighlight', 'deselect', 'unfade', 'show'];\n\n\n// LocusZoom plugins work by exporting a function that receives the `LocusZoom` object\n// This allows them to work in many contexts (including script tags and ES6 imports)\nfunction install(LocusZoom) {\n    const _Button = LocusZoom.Widgets.get('_Button');\n    const _BaseWidget = LocusZoom.Widgets.get('BaseWidget');\n\n\n    /**\n     * Special button/menu to allow model building by tracking individual covariants. Will track a list of covariate\n     *   objects and store them in the special `model.covariates` field of plot `state`.\n     * @param {object} layout\n     * @param {string} layout.button_html The HTML to render inside the button\n     * @param {string} layout.button_title Text to display as a tooltip when hovering over the button\n     */\n    class CovariatesModel extends _BaseWidget {\n        initialize() {\n            // Initialize state.model.covariates\n            this.parent_plot.state.model = this.parent_plot.state.model || {};\n            this.parent_plot.state.model.covariates = this.parent_plot.state.model.covariates || [];\n            // Create an object at the plot level for easy access to interface methods in custom client-side JS\n            /**\n             * When a covariates model toolbar element is present, create (one) object at the plot level that exposes\n             *   widget data and state for custom interactions with other plot elements.\n             * @class CovariatesModel\n             */\n            this.parent_plot.CovariatesModel = {\n                /** @member {Button} */\n                button: this,\n                /**\n                 * Add an element to the model and show a representation of it in the toolbar widget menu. If the\n                 *   element is already part of the model, do nothing (to avoid adding duplicates).\n                 * When plot state is changed, this will automatically trigger requests for new data accordingly.\n                 * @param {string|object} element_reference Can be any value that can be put through JSON.stringify()\n                 *   to create a serialized representation of itself.\n                 */\n                add: (element_reference) => {\n                    const plot = this.parent_plot;\n                    const element = deepCopy(element_reference);\n                    if (typeof element_reference == 'object' && typeof element.html != 'string') {\n                        element.html = ( (typeof element_reference.toHTML == 'function') ? element_reference.toHTML() : element_reference.toString());\n                    }\n                    // Check if the element is already in the model covariates array and return if it is.\n                    for (let i = 0; i < plot.state.model.covariates.length; i++) {\n                        if (JSON.stringify(plot.state.model.covariates[i]) === JSON.stringify(element)) {\n                            return plot;\n                        }\n                    }\n                    plot.state.model.covariates.push(element);\n                    plot.applyState();\n                    plot.CovariatesModel.updateWidget();\n                    return plot;\n                },\n                /**\n                 * Remove an element from `state.model.covariates` (and from the toolbar widget menu's\n                 *  representation of the state model). When plot state is changed, this will automatically trigger\n                 *  requests for new data accordingly.\n                 * @param {number} idx Array index of the element, in the `state.model.covariates array`.\n                 */\n                removeByIdx: (idx) => {\n                    const plot = this.parent_plot;\n                    if (typeof plot.state.model.covariates[idx] == 'undefined') {\n                        throw new Error(`Unable to remove model covariate, invalid index: ${idx.toString()}`);\n                    }\n                    plot.state.model.covariates.splice(idx, 1);\n                    plot.applyState();\n                    plot.CovariatesModel.updateWidget();\n                    return plot;\n                },\n                /**\n                 * Empty the `state.model.covariates` array (and toolbar widget menu representation thereof) of all\n                 *  elements. When plot state is changed, this will automatically trigger requests for new data accordingly\n                 */\n                removeAll: () => {\n                    const plot = this.parent_plot;\n                    plot.state.model.covariates = [];\n                    plot.applyState();\n                    plot.CovariatesModel.updateWidget();\n                    return plot;\n                },\n                /**\n                 * Manually trigger the update methods on the toolbar widget's button and menu elements to force\n                 *   display of most up-to-date content. Can be used to force the toolbar to reflect changes made, eg if\n                 *   modifying `state.model.covariates` directly instead of via `plot.CovariatesModel`\n                 */\n                updateWidget: () => {\n                    this.button.update();\n                    this.button.menu.update();\n                },\n            };\n        }\n\n        update() {\n\n            if (this.button) {\n                return this;\n            }\n\n            this.button = new _Button(this)\n                .setColor(this.layout.color)\n                .setHtml(this.layout.button_html)\n                .setTitle(this.layout.button_title)\n                .setOnclick(() => {\n                    this.button.menu.populate();\n                });\n\n            this.button.menu.setPopulate(() => {\n                const selector = this.button.menu.inner_selector;\n                selector.html('');\n                // General model HTML representation\n                if (typeof this.parent_plot.state.model.html != 'undefined') {\n                    selector.append('div').html(this.parent_plot.state.model.html);\n                }\n                // Model covariates table\n                if (!this.parent_plot.state.model.covariates.length) {\n                    selector.append('i').html('no covariates in model');\n                } else {\n                    selector.append('h5').html(`Model Covariates (${this.parent_plot.state.model.covariates.length})`);\n                    const table = selector.append('table');\n                    this.parent_plot.state.model.covariates.forEach((covariate, idx) => {\n                        const html = ((typeof covariate == 'object' && typeof covariate.html == 'string') ? covariate.html : covariate.toString());\n                        const row = table.append('tr');\n                        row.append('td').append('button')\n                            .attr('class', `lz-toolbar-button lz-toolbar-button-${this.layout.color}`)\n                            .style('margin-left', '0em')\n                            .on('click', () => this.parent_plot.CovariatesModel.removeByIdx(idx))\n                            .html('×');\n                        row.append('td')\n                            .html(html);\n                    });\n                    selector.append('button')\n                        .attr('class', `lz-toolbar-button lz-toolbar-button-${this.layout.color}`)\n                        .style('margin-left', '4px')\n                        .html('× Remove All Covariates')\n                        .on('click', () => this.parent_plot.CovariatesModel.removeAll());\n                }\n            });\n\n            this.button.preUpdate = () => {\n                let html = 'Model';\n                const count = this.parent_plot.state.model.covariates.length;\n                if (count) {\n                    const noun = count > 1 ? 'covariates' : 'covariate';\n                    html += ` (${count} ${noun})`;\n                }\n                this.button.setHtml(html).disable(false);\n            };\n\n            this.button.show();\n\n            return this;\n        }\n    }\n\n\n    /**\n     * Menu for manipulating multiple data layers in a single panel: show/hide, change order, etc.\n     */\n    class DataLayersWidget extends _BaseWidget {\n        update() {\n\n            if (typeof this.layout.button_html != 'string') {\n                this.layout.button_html = 'Data Layers';\n            }\n            if (typeof this.layout.button_title != 'string') {\n                this.layout.button_title = 'Manipulate Data Layers (sort, dim, show/hide, etc.)';\n            }\n\n            if (this.button) {\n                return this;\n            }\n\n            this.button = new _Button(this)\n                .setColor(this.layout.color)\n                .setHtml(this.layout.button_html)\n                .setTitle(this.layout.button_title)\n                .setOnclick(() => {\n                    this.button.menu.populate();\n                });\n\n            this.button.menu.setPopulate(() => {\n                this.button.menu.inner_selector.html('');\n                const table = this.button.menu.inner_selector.append('table');\n                this.parent_panel.data_layer_ids_by_z_index.slice().reverse().forEach((id, idx) => {\n                    const data_layer = this.parent_panel.data_layers[id];\n                    const name = (typeof data_layer.layout.name != 'string') ? data_layer.id : data_layer.layout.name;\n                    const row = table.append('tr');\n                    // Layer name\n                    row.append('td').html(name);\n                    // Status toggle buttons\n                    this.layout.statuses.forEach((status_adj) => {\n                        const status_idx = STATUS_ADJECTIVES.indexOf(status_adj);\n                        const status_verb = STATUS_VERBS[status_idx];\n                        let html, onclick, highlight;\n                        if (data_layer.global_statuses[status_adj]) {\n                            html = STATUS_ANTIVERBS[status_idx];\n                            onclick = `un${status_verb}AllElements`;\n                            highlight = '-highlighted';\n                        } else {\n                            html = STATUS_VERBS[status_idx];\n                            onclick = `${status_verb}AllElements`;\n                            highlight = '';\n                        }\n                        row.append('td').append('a')\n                            .attr('class', `lz-toolbar-button lz-toolbar-button-${this.layout.color}${highlight}`)\n                            .style('margin-left', '0em')\n                            .on('click', () => {\n                                data_layer[onclick]();\n                                this.button.menu.populate();\n                            })\n                            .html(html);\n                    });\n                    // Sort layer buttons\n                    const at_top = (idx === 0);\n                    const at_bottom = (idx === (this.parent_panel.data_layer_ids_by_z_index.length - 1));\n                    const td = row.append('td');\n                    td.append('a')\n                        .attr('class', `lz-toolbar-button lz-toolbar-button-group-start lz-toolbar-button-${this.layout.color}${at_bottom ? '-disabled' : ''}`)\n                        .style('margin-left', '0em')\n                        .on('click', () => {\n                            data_layer.moveDown(); this.button.menu.populate();\n                        })\n                        .html('▾')\n                        .attr('title', 'Move layer down (further back)');\n                    td.append('a')\n                        .attr('class', `lz-toolbar-button lz-toolbar-button-group-middle lz-toolbar-button-${this.layout.color}${at_top ? '-disabled' : ''}`)\n                        .style('margin-left', '0em')\n                        .on('click', () => {\n                            data_layer.moveUp(); this.button.menu.populate();\n                        })\n                        .html('▴')\n                        .attr('title', 'Move layer up (further front)');\n                    td.append('a')\n                        .attr('class', 'lz-toolbar-button lz-toolbar-button-group-end lz-toolbar-button-red')\n                        .style('margin-left', '0em')\n                        .on('click', () => {\n                            if (confirm(`Are you sure you want to remove the ${name} layer? This cannot be undone!`)) {\n                                data_layer.parent.removeDataLayer(id);\n                            }\n                            return this.button.menu.populate();\n                        })\n                        .html('×')\n                        .attr('title', 'Remove layer');\n                });\n                return this;\n            });\n\n            this.button.show();\n\n            return this;\n        }\n    }\n\n    const covariates_model_tooltip = function () {\n        const covariates_model_association = LocusZoom.Layouts.get('tooltip', 'standard_association', { unnamespaced: true });\n        covariates_model_association.html += '<a href=\"javascript:void(0);\" onclick=\"LocusZoom.getToolTipPlot(this).CovariatesModel.add(LocusZoom.getToolTipData(this));\">Condition on Variant</a><br>';\n        return covariates_model_association;\n    }();\n\n    const covariates_model_plot = function () {\n        const covariates_model_plot_toolbar = LocusZoom.Layouts.get('toolbar', 'region_nav_plot', { unnamespaced: true });\n        covariates_model_plot_toolbar.widgets.push({\n            type: 'covariates_model',\n            button_html: 'Model',\n            button_title: 'Show and edit covariates currently in model',\n            position: 'left',\n        });\n        return covariates_model_plot_toolbar;\n    }();\n\n    LocusZoom.Widgets.add('covariates_model', CovariatesModel);\n    LocusZoom.Widgets.add('data_layers', DataLayersWidget);\n\n    LocusZoom.Layouts.add('tooltip', 'covariates_model_association', covariates_model_tooltip);\n    LocusZoom.Layouts.add('toolbar', 'covariates_model_plot', covariates_model_plot);\n}\n\nif (typeof LocusZoom !== 'undefined') {\n    // Auto-register the plugin when included as a script tag. ES6 module users must register via LocusZoom.use()\n    // eslint-disable-next-line no-undef\n    LocusZoom.use(install);\n}\n\n\nexport default install;\n"],"sourceRoot":""}